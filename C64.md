# Commodores 64

## Especificaciones

| Elemento | Descripción |
|:--------:|-------------|
| CPU | MOS Technology 6510 <br/> - PAL: 0.9852486 MHz <br/> - NTSC: 1.0227273 MHz |
| RAM | 64 KB |
| ROM | 20 KB dividido en 3 chips <br/> - 8 KB BASIC V2 (\$A000-\$BFFF) <br/> - 8 KB KERNAL (\$E000-\$FFFF) <br/> - 4 KB FONTS (\$D000-\$DFFF) |
| Gráficos | VIC-II (MOS 6567/6569) <br/> - Resolución: 320x200 <br/> - Colores: 16 <br/> - Sprites: 8 de 24x21 (2 colores) o 12x21 (4 colores) <br/> - Interrupciones del rasterizado |
| Sonido | SID (MOS 6581) <br/> - 3x Osciladores (8 octavas, 16-4000 Hz) <br/> - 4x Formas de onda (sierra, triángulo, cuadrada y ruido) <br/> - Filtros: paso-bajo (LPF), paso-alto (HPF) y paso-banda (BPF) <br/> - Envolvente (ADSR) <br/> - Modulación por anillo (Ring Modulation) |
| E/S | - 2x CIA 6526 (joystick, teclado, RS-232, GPIO) <br/> - Bus en serie IEEE 488 (disqueteras e impresoras) <br/> - Cintas de casete (datasette) <br/> - Cartuchos de ROM |
| Disco | Commodore 1541 (5¼ SS-SD, 170 KB) |

## Lenguaje BASIC

### Hola mundo

Para empezar recurriremos al clásico Hola Mundo:

```BASIC
10 REM ESTO ES UN COMENTARIO
20 PRINT "HOLA MUNDO"
```

Todo programa en BASIC está compuesto por líneas con comandos. Cada línea empieza por un número identificador, de 0 a 63999, seguido de un comando del lenguaje. Las líneas tendrán un tamaño máximo de 80 caracteres. Opcionalmente podremos usar `:` para tener varios comandos dentro de una misma línea.

En el ejemplo tenemos dos líneas como parte del programa. En la primera tenemos un comentario de código usando el comando `REM`. En la segunda, con el comando `PRINT`, se envía un mensaje de texto a la pantalla. Para poder ejecutar el programa usaremos el comando `RUN`.

La C64 nos permite ver el código del programa cargado en memoria con `LIST`. 

$$
\texttt{LIST}\ \textcolor{red}{[[} \mathit{primera} \textcolor{red}{]} \texttt{-} \textcolor{red}{[} \mathit{última} \textcolor{red}{]]}
$$

| Parámetro | Descripción |
|:---------:|-------------|
| *primera* | Número de línea inicial del listado, por defecto es 0. |
| *última* | Número de línea final del listado, por defecto es 63999. |

Por ejemplo:

```BASIC
LIST 10     : REM Lista la línea 10 del programa.
LIST -10    : REM Lista hasta la línea 10 del programa.
LIST 10-    : REM Lista desde la línea 10 del programa.
LIST 10-100 : REM Lista desde la línea 10 hasta a la 100.
```

### Comentarios

Con el comando `REM` podemos comentar el código para documentarlo, pero estos comentarios ocupan espacio en la memoria de programa. Este comando ignora el uso de `:` para añadir varios comandos en la misma línea, ya que será ignorado todo lo que venga después de `REM` en la línea.

### Constantes

BASIC tiene tres tipos de datos: **números enteros**, **números flotantes** y **cadenas de texto**. Los tres los podemos expresar como valores literales de la siguiente manera:

- **Enteros:** Números de 16 bits con signo (2 Bytes). Desde `-32768` hasta `+32767`, usando la siguiente sintaxis:

$$\textcolor{red}{[}\texttt{+}\textcolor{red}{|}\texttt{-}\textcolor{red}{]} \mathit{d\acute{\imath}gitos}$$ 

- **Flotantes:** Números flotantes de 40 bits (5 Bytes). El exponente puede tener un valor desde `-39` hasta `+38`. Usan la siguiente sintaxis:

$$\textcolor{red}{[}\texttt{+}\textcolor{red}{|}\texttt{-}\textcolor{red}{]} \mathit{d\acute{\imath}gitos}\textcolor{red}{[}\texttt{.}\mathit{d\acute{\imath}gitos}\textcolor{red}{]} \textcolor{red}{[}\texttt{E}\textcolor{red}{[}\texttt{+}\textcolor{red}{|}\texttt{-}\textcolor{red}{]} \mathit{d\acute{\imath}gitos}\textcolor{red}{]}$$

- **Cadenas:** Cualquier texto que empieza y termina por dobles comillas (`"`).

Por ejemplo:

```BASIC
10 PRINT "CADENA DE TEXTO"     : REM CADENA DE TEXTO
20 PRINT "POSITIVO:"  1234     : REM POSITIVO: 1234     
30 PRINT "NEGATIVO:" -4321     : REM NEGATIVO:-4321
40 PRINT "FLOTANTE:" 6.543E-21 : REM FLOTANTE: 6.543E-21
```

El único carácter que no puede contener un literal de cadena de texto son las dobles comillas, sin embargo usando la función `CHR$(34)` podemos obtener una cadena de texto que contenga dobles comillas:
 
```BASIC
10 PRINT CHR$(34) "AMIGA" CHR$(34) : REM "AMIGA"
```

### Variables

Las variables nos permiten guardar valores con un nombre identificador, para poder recuperarlos y/o modificarlos más tarde. Un nombre identificador es una secuencia compuesta por letras (`A-Z`) y dígitos (`0-9`), que debe empezar siempre por una letra. Los tipos de variables que existen son:

- **Flotantes:** Almacenan números de coma flotante. Es el tipo por defecto de las variables, simplemente hay que definir un nombre identificador. Por ejemplo: `X`, `Y`, `Z`, etc.
- **Enteras:** Almacenan números enteros. Este tipo se asigna terminando el nombre identificador con el símbolo `%`. Por ejemplo: `I%`, `J%`, `K%`, etc.
- **Cadenas:** Almacenan cadenas de texto. Este tipo se asigna terminando el nombre identificador con el símbolo `$`. Por ejemplo: `N$`, `M$`, `S%`, etc.

Podemos asignar un valor a una variable con el operador `=`:

```BASIC
10 U  = 1.234
20 V% = 12345
30 W$ = "ABC"
```

El tamaño de un nombre identificador puede ser tan largo como una línea, pero el intérprete de BASIC sólo tiene en cuenta las dos primeras letras y su tipo. Es decir:

```BASIC
10 RAX  = 10
20 RAY  = 20
30 RAZ% = 30
40 PRINT RAX  : REM 20
50 PRINT RAZ% : REM 30
```

No podremos utilizar como nombres identificadores los que ya están asignados para los comandos de BASIC, así como sus abreviaciones, a las que llamaremos palabras reservadas del lenguaje.

### Arrays

..

### Operadores

..

### Entrada y salida

..

### Funciones

..

### Comandos

..

## Lenguaje ensamblador

..

## Interfaz gráfica

..

## Interfaz sonora

..

## Entrada y salida

### Teclado

..

### Joysticks

..

## Mapa de memoria

..
